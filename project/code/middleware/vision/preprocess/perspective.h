#pragma once

static const int flat_array_mapping[1767] = {
        0,     1,     3,     4,     6,     7,     8,    10,    11,    13,    14,    15,    17,    18,    20,    21,
       22,    24,    25,    27,    28,    29,    31,    32,    34,    35,    36,    38,    39,    41,    42,    43,
       45,    46,    48,    49,    50,    52,    53,    55,    56,    58,    59,    60,    62,    63,    65,    66,
       67,    69,    70,    72,    73,    74,    76,    77,    79,    -1,     0,     2,     3,     5,     6,     8,
        9,    10,    12,    13,    15,    16,    18,    19,    21,    22,    23,    25,    26,    28,    29,    31,
       32,    34,    35,    36,    38,    39,    41,    42,    44,    45,    46,    48,    49,    51,    52,    54,
       55,    57,    58,    59,    61,    62,    64,    65,    67,    68,    69,    71,    72,    74,    75,    77,
       78,    80,    -1,    -1,    81,    82,    84,    85,    87,    88,    90,    91,    93,    94,    96,    97,
       99,   100,   102,   103,   104,   106,   107,   109,   110,   112,   113,   115,   116,   118,   119,   121,
      122,   124,   125,   127,   128,   130,   131,   133,   134,   136,   137,   138,   140,   141,   143,   144,
      146,   147,   149,   150,   152,   153,   155,   156,   158,   159,    -1,    -1,    -1,    -1,    81,    83,
       84,    86,    87,    89,    90,    92,    93,    95,    97,    98,   100,   101,   103,   104,   106,   107,
      109,   110,   112,   113,   115,   116,   118,   119,   121,   122,   124,   125,   127,   128,   130,   131,
      133,   134,   136,   137,   139,   140,   142,   144,   145,   147,   148,   150,   151,   153,   154,   156,
      157,   159,    -1,    -1,    -1,    -1,    -1,   160,   162,   163,   165,   167,   168,   170,   171,   173,
      174,   176,   177,   179,   181,   182,   184,   185,   187,   188,   190,   191,   193,   195,   196,   198,
      199,   201,   202,   204,   205,   207,   209,   210,   212,   213,   215,   216,   218,   220,   221,   223,
      224,   226,   227,   229,   230,   232,   234,   235,   237,   238,   240,    -1,    -1,    -1,    -1,    -1,
       -1,   161,   162,   164,   166,   167,   169,   170,   172,   174,   175,   177,   178,   180,   182,   183,
      185,   186,   188,   190,   191,   193,   194,   196,   198,   199,   201,   202,   204,   206,   207,   209,
      210,   212,   214,   215,   217,   218,   220,   222,   223,   225,   227,   228,   230,   231,   233,   235,
      236,   238,   239,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,   241,   243,   245,   246,   248,
      250,   251,   253,   254,   256,   258,   259,   261,   263,   264,   266,   268,   269,   271,   273,   274,
      276,   278,   279,   281,   283,   284,   286,   287,   289,   291,   292,   294,   296,   297,   299,   301,
      302,   304,   306,   307,   309,   311,   312,   314,   316,   317,   319,    -1,    -1,    -1,    -1,    -1,
       -1,    -1,    -1,    -1,   240,   242,   243,   245,   247,   249,   250,   252,   254,   255,   257,   259,
      261,   262,   264,   266,   267,   269,   271,   272,   274,   276,   278,   279,   281,   283,   284,   286,
      288,   289,   291,   293,   295,   296,   298,   300,   301,   303,   305,   306,   308,   310,   312,   313,
      315,   317,   318,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,   321,   322,
      324,   326,   328,   329,   331,   333,   335,   336,   338,   340,   342,   343,   345,   347,   349,   350,
      352,   354,   356,   357,   359,   361,   363,   364,   366,   368,   370,   372,   373,   375,   377,   379,
      380,   382,   384,   386,   387,   389,   391,   393,   394,   396,   398,   400,    -1,    -1,    -1,    -1,
       -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,   321,   323,   325,   327,   328,   330,   332,   334,
      336,   337,   339,   341,   343,   345,   347,   348,   350,   352,   354,   356,   357,   359,   361,   363,
      365,   366,   368,   370,   372,   374,   376,   377,   379,   381,   383,   385,   386,   388,   390,   392,
      394,   395,   397,   399,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,
       -1,    -1,   402,   404,   405,   407,   409,   411,   413,   415,   417,   419,   420,   422,   424,   426,
      428,   430,   432,   434,   435,   437,   439,   441,   443,   445,   447,   449,   450,   452,   454,   456,
      458,   460,   462,   464,   465,   467,   469,   471,   473,   475,   477,   479,    -1,    -1,    -1,    -1,
       -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,   480,   482,   484,   486,   488,
      490,   492,   494,   496,   498,   500,   502,   504,   506,   508,   509,   511,   513,   515,   517,   519,
      521,   523,   525,   527,   529,   531,   533,   535,   537,   539,   541,   542,   544,   546,   548,   550,
      552,   554,   556,   558,   560,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,
       -1,    -1,    -1,    -1,    -1,   481,   483,   485,   487,   489,   491,   493,   495,   497,   499,   501,
      503,   505,   507,   509,   511,   513,   515,   517,   519,   521,   523,   525,   527,   529,   531,   533,
      535,   537,   539,   541,   543,   545,   547,   549,   551,   553,   555,   557,   559,    -1,    -1,    -1,
       -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,   562,
      564,   566,   568,   570,   572,   574,   576,   578,   580,   582,   585,   587,   589,   591,   593,   595,
      597,   599,   601,   603,   605,   608,   610,   612,   614,   616,   618,   620,   622,   624,   626,   628,
      630,   633,   635,   637,   639,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,
       -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,   640,   642,   645,   647,   649,   651,   653,   655,
      658,   660,   662,   664,   666,   668,   670,   673,   675,   677,   679,   681,   683,   686,   688,   690,
      692,   694,   696,   699,   701,   703,   705,   707,   709,   712,   714,   716,   718,    -1,    -1,    -1,
       -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,
       -1,    -1,   721,   723,   725,   728,   730,   732,   734,   737,   739,   741,   743,   746,   748,   750,
      752,   755,   757,   759,   761,   764,   766,   768,   770,   773,   775,   777,   779,   782,   784,   786,
      788,   791,   793,   795,   797,   800,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,
       -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,   802,   804,   806,   809,
      811,   813,   816,   818,   820,   823,   825,   827,   830,   832,   834,   837,   839,   841,   844,   846,
      849,   851,   853,   856,   858,   860,   863,   865,   867,   870,   872,   874,   877,   879,    -1,    -1,
       -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,
       -1,    -1,    -1,    -1,    -1,    -1,   882,   885,   887,   890,   892,   895,   897,   900,   902,   904,
      907,   909,   912,   914,   917,   919,   922,   924,   926,   929,   931,   934,   936,   939,   941,   944,
      946,   949,   951,   953,   956,   958,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,
       -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,   961,
      963,   966,   968,   971,   973,   976,   979,   981,   984,   986,   989,   991,   994,   997,   999,  1002,
     1004,  1007,  1009,  1012,  1014,  1017,  1020,  1022,  1025,  1027,  1030,  1032,  1035,  1038,    -1,    -1,
       -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,
       -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,  1041,  1044,  1047,  1050,  1052,  1055,  1058,
     1060,  1063,  1066,  1068,  1071,  1074,  1076,  1079,  1082,  1084,  1087,  1090,  1092,  1095,  1098,  1101,
     1103,  1106,  1109,  1111,  1114,  1117,  1119,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,
       -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,
       -1,    -1,    -1,  1202,  1205,  1208,  1211,  1214,  1216,  1219,  1222,  1225,  1228,  1231,  1233,  1236,
     1239,  1242,  1245,  1248,  1250,  1253,  1256,  1259,  1262,  1264,  1267,  1270,  1273,  1276,  1279,    -1,
       -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,
       -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,  1280,  1283,  1286,  1289,
     1292,  1295,  1298,  1301,  1304,  1307,  1310,  1313,  1316,  1319,  1322,  1325,  1328,  1331,  1334,  1337,
     1340,  1343,  1346,  1349,  1352,  1355,  1358,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,
       -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,
       -1,    -1,    -1,    -1,    -1,    -1,  1441,  1444,  1448,  1451,  1454,  1457,  1460,  1463,  1466,  1470,
     1473,  1476,  1479,  1482,  1485,  1488,  1492,  1495,  1498,  1501,  1504,  1507,  1510,  1514,  1517,  1520,
       -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,
       -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,
     1602,  1606,  1609,  1612,  1616,  1619,  1622,  1626,  1629,  1632,  1636,  1639,  1642,  1646,  1649,  1652,
     1656,  1659,  1662,  1666,  1669,  1672,  1676,  1679,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,
       -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,
       -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,  1760,  1764,  1767,  1771,  1774,  1778,  1781,
     1785,  1788,  1792,  1795,  1799,  1802,  1806,  1810,  1813,  1817,  1820,  1824,  1827,  1831,  1834,  1838,
       -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,
       -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,
       -1,    -1,    -1,  1921,  1925,  1929,  1932,  1936,  1940,  1944,  1948,  1951,  1955,  1959,  1963,  1966,
     1970,  1974,  1978,  1982,  1985,  1989,  1993,  1997,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,
       -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,
       -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,  2162,  2166,  2171,
     2175,  2179,  2183,  2187,  2191,  2195,  2199,  2203,  2207,  2211,  2215,  2219,  2223,  2227,  2231,  2235,
     2239,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,
       -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,
       -1,    -1,    -1,    -1,    -1,    -1,    -1,  2484,  2488,  2493,  2497,  2501,  2506,  2510,  2514,  2519,
     2523,  2528,  2532,  2536,  2541,  2545,  2549,  2554,  2558,    -1,    -1,    -1,    -1,    -1,    -1,    -1,
       -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,
       -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,
     2721,  2726,  2730,  2735,  2740,  2745,  2749,  2754,  2759,  2763,  2768,  2773,  2778,  2782,  2787,  2792,
     2797,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,
       -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,
       -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,  3122,  3128,  3133,  3138,  3143,  3148,
     3153,  3159,  3164,  3169,  3174,  3179,  3185,  3190,  3195,    -1,    -1,    -1,    -1,    -1,    -1,    -1,
       -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,
       -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,
       -1,    -1,    -1,    -1,  3524,  3530,  3536,  3541,  3547,  3553,  3559,  3564,  3570,  3576,  3581,  3587,
     3593,  3599,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,    -1,
       -1,    -1,    -1,    -1,    -1,    -1,    -1
};

static const unsigned char perspective_mask[1767] = {
    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0,
    0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1,
    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1,
    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
    1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
    1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0
};

// 使用扁平化数组映射进行快速变换
inline void perspective_mapping(const unsigned char* source_image, unsigned char* target_image) {
    for (int i = 0; i < 1767; i++) {
        if (flat_array_mapping[i] >= 0) {
            target_image[i] = source_image[flat_array_mapping[i]];
        } else {
            target_image[i] = 0; // 无效像素设为黑色
        }
    }
}